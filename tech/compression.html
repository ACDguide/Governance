

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>NetCDF compression &#8212; Climate Data Guidelines</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystyle.css" />
    <link rel="stylesheet" type="text/css" href="../_static/admonitions.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tech/compression';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Versioning" href="versioning.html" />
    <link rel="prev" title="Moving data" href="moving-data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../introduction.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/ACDG-logo_v2.png" class="logo__image only-light" alt="Climate Data Guidelines - Home"/>
    <script>document.write(`<img src="../_static/ACDG-logo_v2.png" class="logo__image only-dark" alt="Climate Data Guidelines - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../introduction.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Creating climate data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../create/create-intro.html">Guidelines to create a climate dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create/create-basics.html">Dataset creation basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create/create-new-derived.html">New, modified, and derived datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create/create-publishing.html">Preparing files for publication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create/create-checklists.html">Checklists for data management in the project lifecycle</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Publishing climate data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../publish/publish-intro.html">Guidelines to publish climate data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publish/publish-procedure.html">Publishing procedure</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../publish/publish-options.html">Publishing options</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../publish/publish-nci-geonetwork.html">Publishing climate data with NCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../publish/publish-esgf.html">ESGF publishing procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../publish/publish-csiro-dap.html">CSIRO Data Access Portal (DAP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../publish/publish-zenodo.html">Publishing with Zenodo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../publish/publish-examples.html">Best Practice Published Data Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publish/journals.html">Journal publishers data policies</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Managing datasets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../manage/manage-intro.html">Guidelines to manage climate dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manage/manage-project.html">Project management</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../manage/manage-file.html">File handling</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../manage/manage-update-rep.html">Updates to replicated data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manage/manage-update-pub.html">Updates to published data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manage/manage-docs.html">Documentation and provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manage/manage-ausref.html">Australian Community Reference Climate Data Collection @ NCI</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Retiring datasets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../retire/retire-intro.html">Guidelines to manage the retirement of a dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retire/retire-principles.html">General principles of data retirement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retire/retire-published.html">Use case: published data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retire/retire-replica.html">Use case: replicated data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retire/retire-unpublished.html">Use case: unpublished data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retire/retire-references.html">Further information</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Creating climate data products</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../products/products-intro.html">Guidelines to create a climate data product</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About us</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about-us/working-group-governance.html">Working group governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about-us/goals.html">Working group goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about-us/how-to-contribute.html">Guidelines for contributors</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../concepts/concept-intro.html">Key concepts in data management</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/authorship.html">Authorship</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/backup.html">Backup strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/controlled-vocab.html">Controlled vocabularies</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../concepts/conventions.html">Conventions and standards</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/cf-conventions.html">CF Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/acdd-conventions.html">Attribute Convention for Data Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/other-conventions.html">Other conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/availability-statement.html">Data availability statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/collaboration-agreement.html">Data collaboration agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/dmp.html">Data Management Plan</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../concepts/policies.html">Data policies</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/policy-conduct.html">Responsible Conduct of Research</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/policy-arc.html">Australian Research Council data policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/policy-bom.html">Bureau of Meteorology Data Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/policy-clex.html">CLEX Data Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/policy-csiro.html">CSIRO Data Policy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/fairer-principles.html">FAIR(ER) Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/journal.html">Journal requirements</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../concepts/license.html">Open Access License</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/license-data.html">Dataset license</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/license-code.html">Software licenses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/license-qa.html">Q&amp;A</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/pids.html">Persistent identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/version-control.html">Version Control</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Technical guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="tech-intro.html">Technical tips</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="backup-checklist.html">Backup checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="cf-checker.html">CF compliance checkers</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributors.html">Contributor roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="drs-names.html">Choosing a directory structure and filenames</a></li>

<li class="toctree-l2"><a class="reference internal" href="keywords.html">Choosing keywords</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding.html">Coding best practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_formats.html">Data formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="tech-readme.html">Annotated README example</a></li>
<li class="toctree-l2"><a class="reference internal" href="title.html">Descriptive title</a></li>
<li class="toctree-l2"><a class="reference internal" href="permissions.html">File permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="massdata.html">Mass Data Storage System</a></li>
<li class="toctree-l2"><a class="reference internal" href="moving-data.html">Moving data</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">NetCDF compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Writing valid and compliant netCDF files</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendix/appendix-intro.html">Supplemental material</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/forcodes.html">ANZSRC Field of Research (FoR) codes 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/zenodo.html">Step by step Zenodo guide</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ACDguide/Governance" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ACDguide/Governance/edit/paola_branch/Governance/tech/compression.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ACDguide/Governance/issues/new?title=Issue%20on%20page%20%2Ftech/compression.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/tech/compression.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>NetCDF compression</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compression">Compression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-compress-netcdf-files">Why compress netCDF files?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-does-it-work">How does it work?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compression-tools">Compression tools</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compression-by-gathering">Compression by Gathering</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="netcdf-compression">
<h1>NetCDF compression<a class="headerlink" href="#netcdf-compression" title="Permalink to this heading">#</a></h1>
<section id="compression">
<h2>Compression<a class="headerlink" href="#compression" title="Permalink to this heading">#</a></h2>
<p>The netCDF4 format also introduced the ability of adding internal compression to the files.</p>
<section id="why-compress-netcdf-files">
<h3>Why compress netCDF files?<a class="headerlink" href="#why-compress-netcdf-files" title="Permalink to this heading">#</a></h3>
<p><strong>Saving storage</strong><br></p>
<p>Compressing netCDF data files can shrink them to one third of their original size. This is the equivalent of being given three times as much disk space.</p>
<p><strong>NetCDF compression is lossless</strong><br></p>
<p>The data is exactly as it was when read from disk. It can still be read using the same programming interface. As long as the program reading the data has been compiled with the latest netCDF library (version 4) then the task of decompressing the data is handled by the library and as far as the programs are concerned there is no difference in the data. The usual tools, such as <code class="docutils literal notranslate"><span class="pre">ncdump</span></code>, can be used to examine the variables contained within the netCDF file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Compression with tools such as gzip is possible but is not recommended except for archival purposes.
It has the disadvantage that the file must be decompressed to be read and then recompressed again when finished,
which can be time consuming, not to mention the data in question will take up much more room while it is being analysed.</p>
</div>
</section>
<section id="how-does-it-work">
<h3>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this heading">#</a></h3>
<p>The netCDF library has several options for compressing data, which all compression programs will use, as they all use the underlying library to perform the compression.</p>
<p><strong>Deflate level</strong></p>
<p>This is an integer value from ranging from 0 to 9. A value of 0 means no compression, and 9 is the highest level of compression possible. The higher this value the smaller a file will be once compressed. However, there is a trade-off, the higher the deflate level, the longer it will take to compress, particularly so with very high deflate levels. At deflate level 9 it can take six times longer to compress the data, with only a few percent improvement in compression. The recommended deflate level is 5. This combines good compression with a small increase in compression time.</p>
<p><strong>Shuffle</strong></p>
<p>If the <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> option isn’t turned on each variable is stored on value, i.e. contiguously in memory. When <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> is turned on, the first bit of all variables is stored contiguously in space, followed by the second bit, and so on.
If the numbers we are storing are similar in values there is a high chance that all the first bits are either all <code class="docutils literal notranslate"><span class="pre">0</span></code> or all <code class="docutils literal notranslate"><span class="pre">1</span></code>, so shuffling produces very long sequences of the same number to store in memory which is very efficient. The same would be true for most of the other bits after the first.
The only case in which shuffling is not a good idea is if neighbouring values differ considerably. Usually turning <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> on results in a smaller compressed file with little performance overhead.</p>
<p><strong>Chunking</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">chunking</span></code> also plays a part in the compression process, to use netCDF compression, the data must be chunked. Without <code class="docutils literal notranslate"><span class="pre">chunking</span></code>, a n-dimensional array representing a variable is stored contiguously in memory, following the dimension order. Using <code class="docutils literal notranslate"><span class="pre">chunking</span></code>, an array is broken in units called <code class="docutils literal notranslate"><span class="pre">chunks</span></code>. Each chunk is stored contiguously in memory, as if it was a separate array.
There are several chunking strategies that can be applied, mostly depending on how the data is most frequently accessed. Many tools just adopt the netCDF library default chunking strategy. For many netCDF versions the default strategy has been to create chunks that are simply the same size as the grid dimensions of the variable and using size 1 for <code class="docutils literal notranslate"><span class="pre">time</span></code> when present. The <a class="reference external" href="https://acdguide.github.io/BigData/data/data-netcdf.html#what-is-data-chunking">ACDG guide to BigData</a> covers the implications of different <code class="docutils literal notranslate"><span class="pre">chunking</span></code> strategies on data analysis.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If dealing with a file with contiguous storage, it is necessary to first chunk the file and then apply compression.
Otherwise, the compression operation will fail.
The error message will vary depending on the tool used, for example with nccopy is <code class="docutils literal notranslate"><span class="pre">NetCDF:</span> <span class="pre">Bad</span> <span class="pre">chunk</span> <span class="pre">sizes</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="o">-</span><span class="n">f</span> <span class="n">nc4</span> <span class="o">-</span><span class="n">z</span> <span class="n">zip_5</span> <span class="nb">input</span><span class="o">-</span><span class="n">file</span> <span class="n">output</span><span class="o">-</span><span class="n">file</span>
</pre></div>
</div>
<p>might work, as cdo will impose chunking before compressing.
Another way around this is to use xarray to rewrite the file with the desired encoding, getting better control of chunking and compression at the same time.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This post: <a class="reference external" href="https://earthscience.stackexchange.com/questions/12527/regarding-compression-shuffle-filter-of-netcdf4">https://earthscience.stackexchange.com/questions/12527/regarding-compression-shuffle-filter-of-netcdf4</a>
has a clear representation of how <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> and <code class="docutils literal notranslate"><span class="pre">chunking</span></code> work.</p>
</div>
</section>
</section>
<section id="compression-tools">
<h2>Compression tools<a class="headerlink" href="#compression-tools" title="Permalink to this heading">#</a></h2>
<p>There are several tools that can be used to compress netCDF data, and compression can also be added when creating a file, using the interfaces to the netCDF library available for common programming languages like Python, fortran and MatLab.</p>
<p><strong>nccopy</strong></p>
<p>One of the standard tools included in a netCDF installation is <a class="reference external" href="https://docs.unidata.ucar.edu/nug/current/netcdf_utilities_guide.html#guide_nccopy">nccopy</a>. <code class="docutils literal notranslate"><span class="pre">nccopy</span></code> can compress files and define the chunking using a command line argument (-c). <code class="docutils literal notranslate"><span class="pre">nccopy</span></code> is a good option if a data file structure changes little, so a chunking scheme can be decided upon and hard coded into scripts. It is not so useful if the dimensions and variables change. Another major limitation is that the chunking is defined by dimensions, not variables. If a data file has variables that share dimensions but have different combinations or numbers of dimensions, it is not possible to determine an optimal chunking strategy for each variable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nccopy</span> <span class="o">-</span><span class="n">k</span> <span class="n">nc4</span> <span class="o">-</span><span class="n">d</span> <span class="mi">5</span> <span class="o">-</span><span class="n">s</span> <span class="nb">input</span><span class="o">.</span><span class="n">nc</span> <span class="n">output</span><span class="o">.</span><span class="n">nc</span> 
</pre></div>
</div>
<p><strong>NCO</strong></p>
<p>The <a class="reference external" href="http://nco.sourceforge.net/nco.html#Compression">NetCDF Operator</a> program suite can compress netCDF files and offers several <a class="reference external" href="http://nco.sourceforge.net/nco.html#Chunking">chunking strategies</a>.
This lossless compression is referred to as <code class="docutils literal notranslate"><span class="pre">deflate</span></code> and is usually applied with <code class="docutils literal notranslate"><span class="pre">shuffle</span></code>. The latest versions allow the user to choose in which order these two operations happen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ncks</span> <span class="o">-</span><span class="n">D</span> <span class="mi">5</span> <span class="nb">input</span><span class="o">.</span><span class="n">nc</span> <span class="n">output</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p>NCO also offers three lossy compression algorithms, that can be used in conjunction with <code class="docutils literal notranslate"><span class="pre">deflate</span></code>:</p>
<ul class="simple">
<li><p>Linear packing - a higher precision type is “packed” into a lower precision type, usually NC_SHORT
And two Precision Preserving Compression (PPC) algorithms where a per-variable precision level is set as:</p></li>
<li><p>Number of Significant Digits (NSD) after the decimal point</p></li>
<li><p>Decimal Significant Digits (DSD) before and after the decimal point</p></li>
</ul>
<p>For more details refer to the NCO documentation listed above.</p>
<p><strong>CDO</strong></p>
<p><a class="reference external" href="https://code.mpimet.mpg.de/projects/cdo/embedded/index.html#x1-70001.2.1">Climate Data Operators</a> can also compress netCDF, <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> is automatically enabled and it offers limited chunking options: auto (default), grid or lines.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="o">-</span><span class="n">f</span> <span class="n">nc4</span> <span class="o">-</span><span class="n">z</span> <span class="n">zip_5</span> <span class="p">{</span><span class="o">-</span><span class="n">k</span> <span class="n">grid</span><span class="p">}</span> <span class="n">copy</span> <span class="n">inpput</span><span class="o">.</span><span class="n">nc</span> <span class="n">output</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>nccompress</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">nccompress</span></code> package is available at NCI, as part of the CLEX-CMS conda environment. At present it consists of four python-based programs: <code class="docutils literal notranslate"><span class="pre">ncfind</span></code>, <code class="docutils literal notranslate"><span class="pre">nc2nc</span></code>, <code class="docutils literal notranslate"><span class="pre">nccompress</span></code> and <code class="docutils literal notranslate"><span class="pre">ncvarinfo</span></code>. <code class="docutils literal notranslate"><span class="pre">nccompress</span></code> can copy netCDF files with compression and an optimised chunking strategy that has reasonable performance for many datasets. Its two main limitations: it is slower than the other programs, and it can only compress netCDF3 or netCDF4 classic format.
The <code class="docutils literal notranslate"><span class="pre">ncfind</span></code> utility is used to find netCDF files and discriminate between compressed and uncompressed ones.
For more information refer to the <a class="reference external" href="http://climate-cms.wikis.unsw.edu.au/NetCDF_Compression_Tools#General_guidelines">original documentation</a></p>
</section>
<section id="compression-by-gathering">
<h2>Compression by Gathering<a class="headerlink" href="#compression-by-gathering" title="Permalink to this heading">#</a></h2>
<p>This method is described in the CF conventions document:</p>
<p><a class="reference external" href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#_reduction_of_dataset_size">https://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#_reduction_of_dataset_size</a></p>
<div class="admonition-xbitinfo admonition">
<p class="admonition-title"><strong>xbitinfo</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">xbitinfo</span></code> (<a class="reference external" href="https://xbitinfo.readthedocs.io/en/latest/">https://xbitinfo.readthedocs.io/en/latest/</a>) is an xarray-wrapper around BitInformation.jl (<a class="github reference external" href="https://github.com/milankl/BitInformation.jl">milankl/BitInformation.jl</a>) to retrieve and apply bitrounding from within python.
It performs bitwise information analysis and manipulation so that data can be rounded efficiently based on actual information content.</p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./tech"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="moving-data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Moving data</p>
      </div>
    </a>
    <a class="right-next"
       href="versioning.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Versioning</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compression">Compression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-compress-netcdf-files">Why compress netCDF files?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-does-it-work">How does it work?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compression-tools">Compression tools</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compression-by-gathering">Compression by Gathering</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By ACD Working Group
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>